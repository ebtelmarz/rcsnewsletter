<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"      
      xmlns:p="http://primefaces.prime.com.tr/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <f:loadBundle basename="Language" var="msg" />
    <f:loadBundle basename="Newsletter" var="nlk" />
    <h:head>
<!--        <title>#{nlk['newsletter.admin.mailing.sendnewsletter']}</title>-->
    </h:head>
    <h:body>
        <h:form styleClass="multi-site-form">
            <h:inputHidden value="#{newsletterMailingManagedBean.mailingId}"/>
            <h1>#{nlk['newsletter.admin.mailing.sendnewsletter']}</h1>
            <p>
               <h:outputFormat value="#{nlk['newsletter.admin.mailing.send.confirmation.l1']}" escape="false">
                   <f:param value="#{newsletterMailingManagedBean.selectedMailingName}" />
                   <f:param value="#{newsletterMailingManagedBean.selectedArticleName}" />
               </h:outputFormat>                
            </p>
            <p>
               <h:outputFormat value="#{nlk['newsletter.admin.mailing.send.confirmation.l2']}" escape="false">
                   <f:param value="#{newsletterMailingManagedBean.selectedListName}" />
               </h:outputFormat> 
            </p>
            <p>
                <h:outputFormat value="#{nlk['newsletter.admin.mailing.send.confirmation.l3']}" escape="false">
                    <f:param value="#{newsletterMailingManagedBean.selectedListCountMembers}" />
               </h:outputFormat> 
            </p>
            <br/>
            <p:commandButton styleClass="confirm-delete-button newsletter-forms-button newsletter-forms-button newsletter-forms-confirmation-delete-panel" widgetVar="confirmDeleteButton" value="#{nlk['newsletter.admin.mailing.sendnewsletter']}" action="#{newsletterMailingManagedBean.sendMailing}" update="infoMessages"/>            
            <p:button styleClass="newsletter-forms-button" outcome="admin" value="#{nlk['newsletter.admin.category.delete.cancel']}" />
            
            <h:panelGrid columns="2" styleClass="newsletter-forms-confirmation-delete-panel">
                <h:selectBooleanCheckbox onchange="enableDeleteButton(this)"/>
                <h:outputText value="#{nlk['newsletter.admin.category.delete.risks.acept']}"/>
            </h:panelGrid> 
            
        </h:form>        

        <script type="text/javascript">
            
            function enableDeleteButton(ob) {
                var confirmButton = $j(".confirm-delete-button");
                
                if (confirmButton.attr('disabled')) {
                    confirmButton.removeAttr('disabled');
                } else {
                    confirmButton.attr('disabled', 'disabled');
                }
                confirmButton.toggleClass("ui-button-disabled ui-state-disabled");                                
            }
            
            $j(document).ready(function(){
                var confirmButton = $j(".confirm-delete-button");
                confirmButton.attr('disabled', 'true');
                confirmButton.addClass("ui-button-disabled ui-state-disabled");                
            });
        </script>
        <script type="text/javascript"> 
            jQuery(document).ready(function() {  
                multiSiteForms(#{request.getParameter('doAsGroupId')});
            });
        </script> 
    </h:body>
</html>